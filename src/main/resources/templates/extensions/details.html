<main>
    <header>
        <h2 th:text="${extension.name}"></h2>
        <h2 th:text="${extension.description}"></h2>
        <h2 th:text="${extension.downloads}"></h2>
        <a th:href="@{/user/{id}(id=${extension.publisher.id})}">
            <span class="mdl-chip mdl-chip--contact" th:style="${user.isBanned()} ? 'background-color:rgba(255, 0, 0 , 0.5)' : 'background-colir: #dedede'">
                <img th:attr="src=@{${extension.publisher.picURI}}" class="mdl-chip__contact" >
                <span class="mdl-chip__text" th:text="${extension.publisher.username}"></span>
            </span>
        </a>
        <h2 th:text="${extension.version}"></h2>
        <h2 th:text="${extension.addedOn}"></h2>
        <h2 th:text="${approved}"></h2>
        <h2 th:text="${extension.gitHubInfo.pullCount}"></h2>
        <h2 th:text="${extension.gitHubInfo.issuesCount}"></h2>
        <h2 th:text="${extension.gitHubInfo.lastCommit}"></h2>
        <h2>Tags: </h2>
        <ul th:each="tag : ${tags}">
            <li>
                <a th:href="@{/tag/{name}(name=${tag.name})}">
                    <h2 th:text=${tag.name}></h2>
                </a>
            </li>
        </ul>

        <form th:action="@{/extension/sync/{id} (id=${extension.id})}" method="POST">
            <button sec:authorize="hasRole('ADMIN')">Sync</button>
        </form>
        <th:block sec:authorize="isAuthenticated()"
                  th:if="${user.isAdmin() OR user.isPublisher(extension)}">
            <a th:href="@{/extension/delete/{id}(id = ${extension.id})}">Delete</a>
        </th:block>
        <form th:action="@{/extension/approve/{id} (id=${extension.id})}" method="POST">
            <th:block th:if="${extension.isUnApproved()}">
                <button sec:authorize="hasRole('ADMIN')">Approve</button>
            </th:block>
        </form>

        <form th:action="@{/extension/feature/{id} (id=${extension.id})}" method="POST">
            <th:block th:if="${!extension.isSelected()}">
                <button sec:authorize="hasRole('ADMIN')">Feature</button>
            </th:block>
        </form>

        <form th:action="@{/extension/unFeature/{id} (id=${extension.id})}" method="POST">
            <th:block th:if="${extension.isSelected()}">
                <button sec:authorize="hasRole('ADMIN')">Remove from featured</button>
            </th:block>
        </form>
        <form th:action="@{/extension/download/{id} (id=${extension.id})}" method="POST">
            <button sec:authorize="isAuthenticated()">Download</button>
        </form>
    </header>
</main>